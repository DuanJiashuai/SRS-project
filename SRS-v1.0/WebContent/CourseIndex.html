<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>课程管理</title>
<link href="css/blue.css" rel="stylesheet">
<link href="css/bootstrap.css" rel='stylesheet' type='text/css' />
<link href="css/style.css" rel='stylesheet' type='text/css' />
<style type="text/css">
	html, body {
		font-family: 'Lato', 微软雅黑;
		font-size: 100%;
		background: #fff;
		padding:2em 5em;
	}
	td{
		padding-bottom:10px;
		text-align:left;
	}
	.form-control{
		margin-top:0px;
	}
	.input-group{
		width:100%;
	}
	.glyphicon{
		top:0;
	}
	#courseList>tr>td{
		vertical-align: middle;
	}
</style>
</head>
<body>
	<h2>课程管理</h2>
	<h5 class="text-danger">点击<mark class="text-muted"><u>课程名称</u></mark>修改课程信息</h5>
	<hr />
	<div id="action">
		<button id="checkAll" class="btn btn-default" onclick="checkAll();">
			<span class="glyphicon glyphicon-check" aria-hidden="true"></span>全选
		</button>
		<button id="deleteCourse" class="btn btn-default"
			onclick="deleteCourses();">
			<span class="glyphicon glyphicon-trash" aria-hidden="true"></span>删除
		</button>
		<button class="btn btn-default" id="modal-858341" href='#modal-container-858341' role='button' data-toggle='modal'>
			<span class="glyphicon glyphicon-plus" aria-hidden="true"></span>新增
		</button>
	</div>
	<div class="table-responsive">
		<table class="table table-hover" align="center" id="courseList">
			<tr>
				<th>#</th>
				<th>courseNo</th>
				<th>courseName</th>
				<th>credits</th>
			</tr>
		</table>
	</div>
	<div class="modal fade" id="modal-container-858341" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
					<h4 class="modal-title" id="myModalLabel">
						添加课程
					</h4>
				</div>
				<form action="AddCourse" method="post" id="addCourse" name="addCourse">
					<div class="modal-body">
						<h4 align="center">基本信息</h4>
						<hr />
						<div class="input-group">
							<span class="input-group-addon glyphicon glyphicon-credit-card" ></span>
							<input type="text" name="courseNo" id="courseNo" class="form-control" placeholder="courseNo, UNEDITABLE!" />
						</div>
						<div class="input-group">
							<span class="input-group-addon glyphicon glyphicon-user" ></span>
							<input type="text" name="courseName" id="courseName" class="form-control" placeholder="courseName" />
						</div>
						<div class="input-group">
							<span class="input-group-addon glyphicon glyphicon-education" ></span>
							<input type="text" name="credits" id="credits" class="form-control" placeholder="credits" />
						</div>
					</div>
					<div class="modal-footer" id="submitItem">
						<button type="submit" class="btn btn-primary">
							提交
						</button>
						<button type="button" class="btn btn-default" data-dismiss="modal">
							取消
						</button> 
					</div>
				</form>
			</div>
		</div>
	</div>
</body>
<script type="text/javascript" src="js/jquery-1.11.3.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<script src="js/icheck.js"></script>
<script src="js/common.js"></script>
<script type="text/javascript">
$(document).ready(function(){
	$.getJSON("GetAllCourses",function(json){
		var html="";
		for(var i=0;i<json.length;i++){
			html+="<tr><td><input type='checkbox' name='course' id='course' value='"+json[i].courseNo+"' /></td>";
			html+="<td>"+json[i].courseNo+"</td><td><a href='EditCourse.html?courseNo="+json[i].courseNo+"'>"+json[i].courseName+"</a></td><td>"+json[i].credits+"</td></tr>";
		}
		$("#courseList").append(html);
		$('input').iCheck({
			checkboxClass: 'icheckbox_square-blue',
			radioClass: 'iradio_square-blue',
			increaseArea: '20%'
		});
	});
});

function deleteCourses(){
	var count=0;
	var courseNo=new Array();
	$(".icheckbox_square-blue").each(function(){
		if($(this).css("background-position")=="-48px 0px"){
			count++;
			courseNo[count]=$(this).children("input").val();
		};
	});
	if(count==0){
		alert("请至少选择一门课程");
	}else{
		if(confirm("操作不可恢复，确认要删除选中的课程吗？")==true){
			alert("删除成功！");
			window.location.href="DeleteCourses?count="+count+"&courseNo="+courseNo; 
		}
	}
}
</script>
</html>